<% if @otype == "outcome" %>
    <h3>Розподіл витрат по дняx</h3>
    <div class = "one_item_outcome">
<% else %>
    <h3>Розподіл доходів по дняx</h3>
    <div class = "one_item_income">
<% end %>
  <h4>за період з <%= @start_date %> по <%= @end_date %></h4>
    <% if @category_id == "0" %>
      <h5>(по всіх категоріях)</h5>
    <% else %>
      <h5>(по категорії: "<%= @category_name %>")</h5>
    <% end %>
    
  <% if @dates.size == 0 %>
    <p style="color: red; font-weight: bold">За вибраний період часу, таких операцій немає.
    <br>Спробуй створити звіт з іншими параметрами запиту
    </p>
    <div class = "button_in_item">
      <%= link_to "Звіт", reports_path %>
    </div>
  <% elsif @dates.size == 1 %>
    <p style="font-weight: bold">Недостатньо даних для побудови графіку. 
    <br>Параметрам запиту відповідає лише один день - <%= @dates.join.to_date %>. Загальна сума: <%= @moneys.join %> грн.
    <br>Спробуй створити звіт з іншими параметрами запиту
    </p>
    <div class = "button_in_item">
      <%= link_to "Звіт", reports_path %>
    </div>

  <% else %>    
    <canvas id="myChart"></canvas>
    <script>
    {
      const ctx = document.getElementById('myChart').getContext('2d');
      const data = {
        labels: <%= raw @dates %>,
        datasets: [{
          label: 'Графік по днях',
          data: <%= @moneys %>,
          fill: false,
          borderColor: 'rgb(75, 192, 192)',
          tension: 0.1
        }]
      };

      const config = {
        type: 'line',
        data: data,        
      };

      const myChart = new Chart(ctx, config);
    }
    </script>

  <% end %>

</div>
